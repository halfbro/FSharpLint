<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FSharpLint
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A lint tool for F#.">
    <meta name="author" content="Matthew Mcveigh">

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script type="text/javascript" src="content/tips.js"></script>
	<script type="text/javascript">$(function() { $("#main table.pre").wrap("<div class='code-wrapper'></div>"); });</script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
        </ul>
        <h3 class="muted"><a href="index.html">FSharpLint</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1>FSharpLint</h1>
<p>FSharpLint is a lint tool for F#. It can be ran as a MSBuild task, or as a console application.</p>
<blockquote>
<p>The term [lint] is now applied generically to tools that flag suspicious usage in software written in any computer language - <a href="http://en.wikipedia.org/wiki/Lint_(software)"><em>Wikipedia</em></a></p>
</blockquote>
<p>Using a <code>.fsproj</code> (F# project) file the tool will analyse all of the F# implementation files in a project looking for code that breaks a set of rules governing the style of the code. Examples of rules: lambda functions must be less than 6 lines long, class member identifiers must be PascalCase.</p>
<h4>Example Usage of the Tool</h4>
<p>The following program:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">ExampleInterface</span> <span class="o">=</span>
   <span class="k">abstract</span> <span class="k">member</span> <span class="i">print</span> <span class="o">:</span> <span class="i">unit</span> <span class="k">-&gt;</span> <span class="i">unit</span>

[&lt;<span class="i">EntryPoint</span>&gt;]
<span class="k">let</span> <span class="i">main</span> <span class="i">argv</span> <span class="o">=</span> 
    <span class="k">let</span> <span class="i">x</span> <span class="o">=</span> <span class="i">List</span><span class="o">.</span><span class="i">fold</span> (<span class="k">fun</span> <span class="i">x</span> <span class="i">y</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">+</span> <span class="i">y</span>) <span class="n">0</span> [<span class="n">1</span>;<span class="n">2</span>;<span class="n">3</span>]
    <span class="i">printfn</span> <span class="s">&quot;%d&quot;</span> <span class="i">x</span>
    <span class="n">0</span>
</code></pre></td>
</tr>
</table>
<p>Run against the lint tool generates the following errors:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="error">Consider changing `ExampleInterface` to be prefixed with `I`.
Error in file Program.fs on line 1 starting at column 5
type ExampleInterface =
     ^

Consider changing `print` to PascalCase.
Error in file Program.fs on line 2 starting at column 19
   abstract member print : unit -&gt; unit
                   ^

If `(+)` has no mutable arguments partially applied the lambda can be removed.
Error in file Program.fs on line 6 starting at column 23
    let x = List.fold (fun x y -&gt; x + y) 0 [1;2;3]
                       ^
</code></pre></td></tr></table>
<p>Refactored using lint's warnings:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">IExampleInterface</span> <span class="o">=</span>
   <span class="k">abstract</span> <span class="k">member</span> <span class="i">Print</span> <span class="o">:</span> <span class="i">unit</span> <span class="k">-&gt;</span> <span class="i">unit</span>

[&lt;<span class="i">EntryPoint</span>&gt;]
<span class="k">let</span> <span class="i">main</span> <span class="i">argv</span> <span class="o">=</span> 
    <span class="k">let</span> <span class="i">x</span> <span class="o">=</span> <span class="i">List</span><span class="o">.</span><span class="i">fold</span> (<span class="o">+</span>) <span class="n">0</span> [<span class="n">1</span>;<span class="n">2</span>;<span class="n">3</span>]
    <span class="i">printfn</span> <span class="s">&quot;%d&quot;</span> <span class="i">x</span>
    <span class="n">0</span>
</code></pre></td>
</tr>
</table>
<p>If we run lint again it will find a new error, it's worth running the tool until it no longer finds any errors:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="error">`List.fold (+) 0 x` might be able to be refactored to `List.sum x`.
Error in file Program.fs on line 6 starting at column 12
let x = List.fold (+) 0 [1;2;3]
        ^
</code></pre></td></tr></table>
<p>After refactoring again we have with no lint errors:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">IExampleInterface</span> <span class="o">=</span>
   <span class="k">abstract</span> <span class="k">member</span> <span class="i">Print</span> <span class="o">:</span> <span class="i">unit</span> <span class="k">-&gt;</span> <span class="i">unit</span>

[&lt;<span class="i">EntryPoint</span>&gt;]
<span class="k">let</span> <span class="i">main</span> <span class="i">argv</span> <span class="o">=</span> 
    <span class="k">let</span> <span class="i">x</span> <span class="o">=</span> <span class="i">List</span><span class="o">.</span><span class="i">sum</span> [<span class="n">1</span>;<span class="n">2</span>;<span class="n">3</span>]
    <span class="i">printfn</span> <span class="s">&quot;%d&quot;</span> <span class="i">x</span>
    <span class="n">0</span>
</code></pre></td>
</tr>
</table>
<h4>Building The Tool</h4>
<p>On windows run <code>build.cmd</code> and on unix based systems run <code>build.sh</code>.</p>
<h4>Running The Tool</h4>
<p>The tool can be run from the command line, or as an MSBuild task.</p>
<ul>
<li><a href="Console-Application.html">Running the command line tool</a>.</li>
<li><a href="MSBuild-Task.html">Running the MSBuild task</a>.</li>
<li><a href="FAKE-Task.html">Running the FAKE task</a>.</li>
</ul>
<h4>Analysers</h4>
<ul>
<li><a href="Hints.html">Hints</a></li>
<li><a href="NameConventions.html">NameConventions</a></li>
<li><a href="SourceLength.html">SourceLength</a></li>
<li><a href="Typography.html">Typography</a></li>
<li><a href="NestedStatements.html">NestedStatements</a></li>
<li><a href="NumberOfItems.html">NumberOfItems</a></li>
<li><a href="FunctionReimplementation.html">FunctionReimplementation</a></li>
<li><a href="XmlDocumentation.html">XmlDocumentation</a></li>
<li><a href="Binding.html">Binding</a></li>
<li><a href="RaiseWithTooManyArguments.html">RaiseWithTooManyArguments</a></li>
</ul>
<p>Rules are grouped into sets of rules called analysers, the reason for this is that it allows for easy configuration of multiple related rules. For example turning off all naming rules can be done by turning off just the analyser in the configuration.</p>
<h4>Configuration Files</h4>
<p>Configuration of the tool is done using xml with a purposely similar structure to <a href="http://stylecop.codeplex.com/">StyleCop</a>. Configuration files must be named: <code>Settings.FSharpLint</code>. A single xml file containing the default configuration for all rules is <a href="https://github.com/fsprojects/FSharpLint/blob/master/src/FSharpLint.Framework/DefaultConfiguration.FSharpLint">included inside of the software</a>.</p>
<p>The configuration files are loaded in a specific order, files loaded after another will override the previous file. The default configuration is loaded first, from there the tool checks each directory from the root to up to the project being linted's directory. For example if the path of the project being linted was <code>C:\Files\SomeProjectBeingLinted</code>, then <code>C:\</code> would first be checked for a config file - if a config file is found then it would override the default config, then <code>C:\Files</code> would be checked - if a config file was found and a config file was also previously found in <code>C:\</code> then the config in <code>C:\Files</code> would override the one in <code>C:\</code> and so on.</p>
<p>The configuration rules are overridden by redefining any properties of an analyser/rule that you want to override, for example if you wanted to turn off the function reimplmentation analyser which has the default configuration of:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="xml"><span class="k">&lt;</span><span class="i">FunctionReimplementation</span><span class="k">&gt;</span>
  <span class="k">&lt;</span><span class="i">Enabled</span><span class="k">&gt;</span>True<span class="k">&lt;/</span><span class="i">Enabled</span><span class="k">&gt;</span>
<span class="k">&lt;/</span><span class="i">FunctionReimplementation</span><span class="k">&gt;</span>
</code></pre></td></tr></table>
<p>To override to turn off you'd set enabled to false in your own configuration file as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="xml"><span class="prep">&lt;?</span>xml version=<span class="s">"1.0"</span> encoding=<span class="s">"utf-8"</span><span class="prep">?&gt;</span>
<span class="k">&lt;</span><span class="i">FSharpLintSettings</span><span class="k">&gt;</span>
    <span class="k">&lt;</span><span class="i">Analysers</span><span class="k">&gt;</span>
    <span class="k">&lt;</span><span class="i">FunctionReimplementation</span><span class="k">&gt;</span>
      <span class="k">&lt;</span><span class="i">Enabled</span><span class="k">&gt;</span>True<span class="k">&lt;/</span><span class="i">Enabled</span><span class="k">&gt;</span>
    <span class="k">&lt;/</span><span class="i">FunctionReimplementation</span><span class="k">&gt;</span>
  <span class="k">&lt;/</span><span class="i">Analysers</span><span class="k">&gt;</span>
<span class="k">&lt;/</span><span class="i">FSharpLintSettings</span><span class="k">&gt;</span>
</code></pre></td></tr></table>
<h4>Disabling rules and analysers within code</h4>
<p>To disable a rule for a single section of code the <a href="http://msdn.microsoft.com/en-us/library/system.diagnostics.codeanalysis.suppressmessageattribute(v=vs.110).aspx">SuppressMessageAttribute</a> can be used. The attribute will not be included into the IL (as long as you don't have the <code>CODE_ANALYSIS</code> preprocessing symbol set).</p>
<p>The attribute can be applied to let bindings, modules, types, and exceptions. Any lint warnings generated on or inside of what the attribute is applied to will be suppressed.</p>
<h5>Category and CheckId</h5>
<p>Only two properties in the attribute need to be set to suppress a rule, these are: <code>Category</code> and <code>CheckId</code>. The attribute has a constructor which takes these two as the arguments, and they can also be set through property initialisation in the default constructor.</p>
<p>Category is the name of the analyser containing the rule to be suppressed e.g. <code>NameConventions</code>.</p>
<p>CheckId is the name of the rule to be suppressed, or <code>*</code> to suppress all rules in the analyser e.g. <code>InterfaceNamesMustBeginWithI</code>.</p>
<h5>Example</h5>
<p>The following code breaks the rule <code>NameConventions.InterfaceNamesMustBeginWithI</code>:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Printable</span> <span class="o">=</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="i">Print</span> <span class="o">:</span> <span class="i">unit</span> <span class="k">-&gt;</span> <span class="i">unit</span>
</code></pre></td>
</tr>
</table>
<p>It will result in the warning: <code>Consider changing `Printable` to be prefixed with `I`.</code></p>
<p>We can disable this rule with: <code>[&lt;System.Diagnostics.CodeAnalysis.SuppressMessage("NameConventions", "InterfaceNamesMustBeginWithI")&gt;]</code></p>
<p>The following code has the <code>SuppressMessage</code> attribute applied to it, this code will generate no warning:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span class="i">SuppressMessage</span>(<span class="s">&quot;NameConventions&quot;</span>, <span class="s">&quot;InterfaceNamesMustBeginWithI&quot;</span>)&gt;]
<span class="k">type</span> <span class="i">Printable</span> <span class="o">=</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="i">Print</span> <span class="o">:</span> <span class="i">unit</span> <span class="k">-&gt;</span> <span class="i">unit</span>
</code></pre></td>
</tr>
</table>
<h4>Ignoring Files</h4>
<p>In the configuration file paths can be used to specify files that should be included, globs are used to match wildcard directories and files. For example the following will match all files with the file name assemblyinfo (the matching is case insensitive) with any extension:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&lt;</span><span class="i">IgnoreFiles</span> <span class="i">Update</span><span class="o">=</span><span class="s">&quot;Add&quot;</span><span class="o">&gt;</span>
	<span class="o">&lt;!</span>[<span class="i">CDATA</span>[
	  <span class="i">assemblyinfo</span><span class="o">.</span><span class="o">*</span>
	]]<span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="i">IgnoreFiles</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<ul>
<li>The <code>Update</code> attribute can be set to <code>Add</code> or <code>Overwrite</code> (if the attribute does not exist it will default to <code>Overwrite</code>). <code>Add</code> will add the paths to existing paths, <code>Overwrite</code> will only use the paths you have specified.</li>
<li>The paths must be separated by new lines.</li>
<li>Directories in the path must be separated using <code>/</code></li>
<li>If the path ends with a <code>/</code> then everything inside of a matching directory shall be excluded.</li>
<li>If the path does not end with a <code>/</code> then all matching files are excluded.</li>
</ul>
<h4>Running Lint From An Application</h4>
<p>Install the <a href="https://www.nuget.org/packages/FSharpLint.Core/"><code>FSharp.Core</code> nuget package</a>.</p>
<p>The namespace <code>FSharpLint.Application</code> contains a module named <code>Lint</code> which provides several functions
to lint a project/source file/source string.</p>


        </div>
        <div class="span3">
          <a href="index.html">
            <img src="img/logo.png" alt="FSharpLint project logo." style="margin:10px 0px 0px 20px;border-style:none;" />
          </a>

          <ul class="nav nav-list" id="menu">

            <li class="nav-header">
              FSharpLint
            </li>

            <li class="divider"></li>

            <li><a href="http://github.com/fsprojects/FSharpLint">Source Code on GitHub</a></li>
            <li><a href="http://github.com/fsprojects/FSharpLint/tree/master/LICENSE">License (MIT)</a></li>
            <li><a href="http://github.com/fsprojects/FSharpLint/tree/master/RELEASE_NOTES.md">Release Notes</a></li>

            <li class="nav-header">Documentation</li>

            <li><a href="index.html">Introduction</a></li>

            <li class="divider"></li>

            <li><a href="Console-Application.html">Using the command line tool.</a></li>
            <li><a href="MSBuild-Task.html">Using the MSBuild task.</a></li>
            <li><a href="FAKE-Task.html">Using the FAKE task.</a></li>

            <li class="nav-header">Analysers</li>

            <li><a href="Hints.html">Hints</a></li>
            <li><a href="NameConventions.html">NameConventions</a></li>
            <li><a href="SourceLength.html">SourceLength</a></li>
            <li><a href="Typography.html">Typography</a></li>
            <li><a href="NestedStatements.html">NestedStatements</a></li>
            <li><a href="NumberOfItems.html">NumberOfItems</a></li>
            <li><a href="FunctionReimplementation.html">FunctionReimplementation</a></li>
            <li><a href="XmlDocumentation.html">XmlDocumentation</a></li>
            <li><a href="Binding.html">Binding</a></li>
            <li><a href="RaiseWithTooManyArguments.html">RaiseWithTooManyArguments</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsprojects/FSharpLint"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </body>
  </html>
